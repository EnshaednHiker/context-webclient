dependencies:
  node: 
    version: 6.10.2
  cache_directories:
    - node_modules
  pre:
    - npm install
    - npm install netlify-cli -g

test:
  override:
    # local host will access production server
    - npm run ci-start:
        background: true
    # Wait on app to be ready
      - wait-on http://localhost:3000
    # Run Cypress tests
      - npm test
deployment:
  staging:
    branch: master
    commands:
      - npm run production-build 
      - netlify deploy -s $NETLIFY_SITE_ID -t $NETLIFY_ACCESS_TOKEN -p ./dist
